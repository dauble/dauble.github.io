---Adding Related Posts in WordPress Without a Plugin------/post/adding-related-posts-wordpress-without-plugin.html------Fri, 27 Oct 2017 08:00:53------This past week I had yet another challenge: add related posts to a blog entry and make it match a design. It seemed straightforward, especially since all the blog posts are organized by category. As I dug deeper, I realized it wasn't going to be as simple as I'd originally thought.

                Let me preface this post by saying <strong>I don't like using unnecessary WordPress plugins. </strong>I'd much rather build something from scratch that doesn't have limitations from a plugin. There are times when plugins are necessary, sure, but I'd much rather have something that doesn't need to be updated constantly or be limited to a plugin's design.

                I should preface this with there are two ways of doing this: display related posts by <b>tags </b>and by <strong>categories</strong>. I'll first demonstrate by displaying related posts by tags. I feel this is the better way to show related posts. <em>Let's assume this will be going on your default single.php page.</em>
                <h2>Related Posts by Tags</h2>
                <pre class="EnlighterJSRAW" data-enlighter-language="php">&lt;div class="related-posts"&gt;
                  &lt;?php
                    $tags = wp_get_post_tags($post-&gt;ID);

                    if ($tags):
                      $first_tag = $tags[0]-&gt;term_id;

                      $args = array(
                        'tag__in' =&gt; array($first_tag),
                        'post__not_in' =&gt; array($post-&gt;ID),
                        'posts_per_page' =&gt; 2,
                        'caller_get_posts' =&gt; 1,
                        'orderby' =&gt; 'rand'
                      );

                      $posts = new WP_Query($args);
                  ?&gt;

                      &lt;?php if($posts-&gt;have_posts()): while($posts-&gt;have_posts()): $posts-&gt;the_post(); ?&gt;

                        &lt;div class="related-posts__post"&gt;
                          &lt;a href="&lt;?php the_permalink(); ?&gt;"&gt;
                            &lt;?php $image = wp_get_attachment_image_src(get_post_thumbnail_id($post-&gt;ID), 'medium'); ?&gt;
                            &lt;img src="&lt;?php echo $image[0]; ?&gt;" alt="" class=""&gt;

                            &lt;span class="related-posts__post--title"&gt;&lt;?php the_title(); ?&gt;&lt;/span&gt;
                          &lt;/a&gt;
                        &lt;/div&gt;

                      &lt;?php endwhile; endif; wp_reset_query(); ?&gt;

                  &lt;?php endif; ?&gt;
                &lt;/div&gt;</pre>
                <h2>Related Posts by Categories</h2>
                <pre class="EnlighterJSRAW" data-enlighter-language="null">&lt;div class="related-posts"&gt;
                  &lt;?php
                    $tags = wp_get_post_categories($post-&gt;ID);

                    if ($tags):
                      $args = array(
                        'current_category' =&gt; $tags,
                        'orderby' =&gt; 'rand',
                        'posts_per_page' =&gt; 2
                      );

                      $posts = new WP_Query($args);
                      while ($posts-&gt;have_posts()): $posts-&gt;the_post();
                  ?&gt;
                      &lt;div class="related-posts__post"&gt;
                        &lt;a href="&lt;?php the_permalink(); ?&gt;" class="related-posts__post--link"&gt;
                          &lt;span class="related-posts__post--link--wrap"&gt;
                            &lt;span class="related-posts__post--link--wrap__overlay"&gt;&lt;/span&gt;

                            &lt;?php $image = wp_get_attachment_image_src(get_post_thumbnail_id($post-&gt;ID), 'blog_image'); ?&gt;
                            &lt;img src="&lt;?php echo $image[0]; ?&gt;" alt="" class="related-posts__post--link--image"&gt;

                            &lt;span class="btn btn-secondary"&gt;Read More&lt;/span&gt;
                          &lt;/span&gt;
                          &lt;h4&gt;&lt;?php the_title(); ?&gt;&lt;/h4&gt;
                        &lt;/a&gt;
                      &lt;/div&gt;
                    &lt;?php endwhile; ?&gt;
                  &lt;?php wp_reset_query(); endif; ?&gt;
                &lt;/div&gt;</pre>
                And voila! I hope this helps.------/assets/images/posts/related-posts.jpg------Array---